# WebSocket Chat - Дополнительное задание

## Описание

Реализован WebSocket чат с поддержкой отдельных комнат. Каждый пользователь получает случайное имя при подключении, и все сообщения форматируются как `{username} :: {message}`.

## Особенности

- **Отдельные комнаты**: Пользователи с одинаковым `chat_name` подключаются к одной комнате
- **Случайные имена**: Каждому клиенту автоматически присваивается уникальное имя (например, `BraveTiger1a2b`)
- **Broadcast**: Сообщения отправляются всем участникам комнаты
- **Уведомления**: О подключении и отключении пользователей

## Запуск сервера

```bash
cd hw2/hw
export PYTHONPATH=${PWD}
uvicorn shop_api.main:app --reload
```
будет на  `http://localhost:8000`

## Тестирование

### Использование игршечного клиента

1. Запустить клиент в первом и во втором терминале:
```bash
cd hw2/hw
python test_chat_client.py general
```

Теперь можно обмениваться сообщениями между клиентами

## Примеры использования

### Пример 1: Два пользователя в одной комнате

**Терминал 1:**
```
$ python test_chat_client.py room1
✓ Подключено к чату 'room1'
> BraveTiger1a2b :: joined the chat
> MightyEagle5f3c :: joined the chat
> Hello everyone!
> BraveTiger1a2b :: Hello everyone!
> MightyEagle5f3c :: Hi BraveTiger!
```

**Терминал 2:**
```
$ python test_chat_client.py room1
✓ Подключено к чату 'room1'
> MightyEagle5f3c :: joined the chat
> BraveTiger1a2b :: Hello everyone!
> Hi BraveTiger!
> MightyEagle5f3c :: Hi BraveTiger!
```

### Пример 2: Разные комнаты

Пользователи в `room1` не будут видеть сообщения от пользователей в `room2` и наоборот.

## API Endpoint

```
WebSocket: /chat/{chat_name}
```

**Параметры:**
- `chat_name` (string): Название комнаты чата

**Формат сообщений:**
- Клиент отправляет: `"text message"`
- Сервер отправляет: `"{username} :: text message"`

## Архитектура

- `chat_manager.py` - Управление комнатами и пользователями
  - `ChatRoom` - Класс комнаты с пользователями
  - `ChatManager` - Глобальный менеджер всех комнат
- `chat_routes.py` - WebSocket endpoint для чата
- `test_chat_client.py` - Простой клиент для тестирования

## Технические детали

- Автоматическая очистка пустых комнат при отключении последнего пользователя
- Обработка внезапных отключений
- Генерация уникальных имен пользователей из прилагательных и животных
- Поддержка неограниченного количества одновременных комнат и пользователей

